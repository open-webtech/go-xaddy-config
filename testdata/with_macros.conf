# Configuration with macros
$(hostname) = mail.example.org
$(primary_domain) = example.org
$(local_domains) = $(primary_domain)
$(backup_domain) = backup.$(primary_domain)

# Basic macro usage
server $(hostname) {
    listen 25
    tls_cert /etc/ssl/$(hostname)/cert.pem
    domains $(local_domains)
}

# Nested macro references
server $(backup_domain) {
    listen 587
    tls_cert /etc/ssl/$(hostname)/cert.pem
    domains $(local_domains)
    backup_for $(hostname)
}

# Multiple values macro
$(cert_paths) = /etc/ssl/cert.pem /etc/ssl/key.pem
tls_files $(cert_paths)

# Macro with environment variables combined
$(log_base) = /var/log/$(hostname)
log_file {env:LOG_DIR}/$(hostname)/server.log